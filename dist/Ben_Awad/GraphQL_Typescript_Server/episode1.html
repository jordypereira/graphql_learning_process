<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating a TypeORM Entity | GraphQL Learning Process</title>
    <meta name="description" content="For school I had to learn a new technology. We have to document it and keep a logbook. I chose GraphQL and documented my whole process on this site.">
    
    
    <link rel="preload" href="/assets/css/styles.c7cd9ca9.css" as="style"><link rel="preload" href="/assets/js/app.c7cd9ca9.js" as="script"><link rel="preload" href="/assets/js/5.815b4159.js" as="script"><link rel="prefetch" href="/assets/js/2.a40b0877.js"><link rel="prefetch" href="/assets/css/1.styles.5a8ea794.css"><link rel="prefetch" href="/assets/js/1.5a8ea794.js"><link rel="prefetch" href="/assets/css/2.styles.a40b0877.css"><link rel="prefetch" href="/assets/js/3.9695746c.js"><link rel="prefetch" href="/assets/js/4.8bb44726.js"><link rel="prefetch" href="/assets/js/6.aadac39e.js"><link rel="prefetch" href="/assets/js/7.28cf0364.js"><link rel="prefetch" href="/assets/js/8.9057e96a.js">
    <link rel="stylesheet" href="/assets/css/1.styles.5a8ea794.css"><link rel="stylesheet" href="/assets/css/2.styles.a40b0877.css"><link rel="stylesheet" href="/assets/css/styles.c7cd9ca9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">GraphQL Learning Process</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://jordypereira.be/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/perjor/graphql_learning_process" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://jordypereira.be/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/perjor/graphql_learning_process" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </div> <div class="page"> <div class="content"><h1 id="creating-a-typeorm-entity"><a href="#creating-a-typeorm-entity" aria-hidden="true" class="header-anchor">#</a> Creating a TypeORM Entity</h1> <h2 id="adding-and-storing-users-in-user-ts"><a href="#adding-and-storing-users-in-user-ts" aria-hidden="true" class="header-anchor">#</a> Adding and storing Users in User.ts</h2> <p>Elke entity is een database table.</p> <ul><li>Gebruik uuid ipv id -&gt; string
Een plugin om uuid's aan te maken: <a href="https://www.npmjs.com/package/uuid" target="_blank" rel="noopener noreferrer">uuid<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>yarn add uuid</code>.</li></ul> <p>Om de typescript query toe te voegen doe je <code>yarn add -D @types/uuid</code></p> <h4 id="no-default-import"><a href="#no-default-import" aria-hidden="true" class="header-anchor">#</a> No default import</h4> <p>Dan doe je <code>import * as uuidv4 fron &quot;uuid/v4&quot;;</code></p> <h3 id="beforeinsert"><a href="#beforeinsert" aria-hidden="true" class="header-anchor">#</a> @BeforeInsert()</h3> <p>Dit wordt opgeroepen voordat de entity in de database gaat.</p> <h3 id="colum"><a href="#colum" aria-hidden="true" class="header-anchor">#</a> @Colum()</h3> <p>de <code>: string</code> is de typescript type.
In de column haakjes moet je de database type defineeren, bv &quot;varchar&quot;.<br>
Als tweede parameter kan je opties meegeven zoals <code>{ length: 255 }</code></p> <div class="warning custom-block"><p class="custom-block-title">Opgepast</p> <p>Geef altijd een max length in zodat ze het niet oneindig groot kunnen ingeven.</p></div> <h2 id="de-database-aanmaken"><a href="#de-database-aanmaken" aria-hidden="true" class="header-anchor">#</a> De database aanmaken</h2> <p><code>&quot;synchronize&quot;: true,</code> in je orncfig file doet dit vanzelf als je de server opstart.</p> <h2 id="defining-the-schema"><a href="#defining-the-schema" aria-hidden="true" class="header-anchor">#</a> Defining the schema</h2> <p>Als we dit in schema.graphql zetten krijgen we syntax highlighting.
We hebben nu wel een lib nodig om het te importen: <a href="https://github.com/prisma/graphql-import" target="_blank" rel="noopener noreferrer">graphql-import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
<code>yarn add graphql-import</code>.</p> <p>Een mutation is een soort request waar je data aan meegeeft dat gedefined staat in de haakjes. De uitroepteken is verplicht. De Boolean is wat hij returned.</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code>type Mutation <span class="token punctuation">{</span>
  register<span class="token punctuation">(</span><span class="token attr-name">email</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Boolean
<span class="token punctuation">}</span>
</code></pre></div><h2 id="resolvers"><a href="#resolvers" aria-hidden="true" class="header-anchor">#</a> Resolvers</h2> <p>in resolvers.ts
Om de type defs van typescript te krijgen in de resolvers gebruken we een lib: <a href="https://github.com/avantcredit/gql2ts/tree/master/packages/cli" target="_blank" rel="noopener noreferrer">gql2ts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>yarn add -D gql2ts</code></p> <p>voeg dit toe aan je start script:<br> <code>&quot;gen-schema-types&quot;: &quot;gql2ts src/schema.graphql -o src/types/schema.d.ts&quot;</code></p> <p>Nu kunnen we de ts type krijgen met GQL.I...</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/6/2018, 4:31:35 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/5.815b4159.js" defer></script><script src="/assets/js/app.c7cd9ca9.js" defer></script>
  </body>
</html>
